$(()=>{const e=()=>window.screen.height<=720;!e()&&$(document.body).css("min-width",1100);const t=(()=>{$(document.body).append('\n      <div class="mdc-snackbar">\n        <div class="mdc-snackbar__surface">\n          <div class="mdc-snackbar__label" role="status" aria-live="polite"></div>\n          <div class="mdc-snackbar__actions">\n            <button type="button" class="mdc-button mdc-snackbar__action">\n              <div class="mdc-button__ripple"></div>\n              <span class="mdc-button__label">关闭</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    ');const e=new mdc.snackbar.MDCSnackbar($(".mdc-snackbar")[0]);return(t,s=2e3)=>{e.labelText=t,e.open(),setTimeout(()=>e.close(),s)}})();(()=>{if(new mdc.topAppBar.MDCTopAppBar($(".mdc-top-app-bar")[0]),e()){$(".mdc-top-app-bar").css("transition","all 0.2s");let e=0;$(window).on("scroll",()=>{window.scrollY<100?$(".mdc-top-app-bar").css("transform","translateY(0)"):e<window.scrollY?$(".mdc-top-app-bar").css("transform","translateY(-66px)"):$(".mdc-top-app-bar").css("transform","translateY(0)"),e=window.scrollY})}})(),$(".headerSearchBar > input").on("focus",()=>$(".headerSearchBar").addClass("is-focused")).on("blur",()=>$(".headerSearchBar").removeClass("is-focused")),$(".materialRipple").addClass("mdc-ripple-surface").each((e,t)=>mdc.ripple.MDCRipple.attachTo(t));class s{constructor(e,t={}){this.opened=!1,this.el=e,this.options=t,this.el.style.transition="all 0.3s"}open(){this.opened=!0,this.el.style.marginLeft=0}close(){this.opened=!1,this.el.style.marginLeft="-265px"}}const a=(()=>{const t=new s($(".drawer-body")[0]),a=new s($(".drawer-placeholder")[0]);function n(){t.close(),a.close(),e()&&o.removeClass("is-active")}const o=$('<div class="drawer-mask">').click(n);$(".page-drawer").append(o);return{source:t,open:function(){t.open(),a.open(),e()&&o.addClass("is-active")},close:n}})();if($("#drawerButton").click(()=>a.source.opened?a.close():a.open()),$(".mdc-tab-bar").each((e,t)=>new mdc.tabBar.MDCTabBar(t)),0!==$(".page-post").length){const e=[],t=[0,0];let s=2;$(".post-body--content > .contentContainer > h2, .post-body--content > .contentContainer > h3").each((a,n)=>{const o=parseInt(n.tagName.replace("H",""));2===o&&(t[0]++,t[1]=0),3===o&&t[1]++,s=o,e.push({id:n.id,name:$(n).text(),level:parseInt(n.tagName.replace("H","")),number:t.join(".").replace(".0",""),offset:n.getBoundingClientRect().top})}),e.forEach(e=>{const t=$(`<a class="articleContents-item com-textLimit" data-level="${e.level}" href="${"#"+e.id}">- ${e.number} ${e.name}</a>`).click(t=>{t.preventDefault(),document.getElementById(e.id).scrollIntoView(),window.scrollTo(0,window.scrollY-56),window.history.replaceState({},"",location.href.replace(/#[^\/]+$/,"")+"#"+e.id)});$(".articleContents").append(t)});const a=$(".articleContents > .articleContents-item");function n(){a.removeClass("is-active"),window.scrollY<e[0].offset?a.eq(0).addClass("is-active"):window.scrollY>e[e.length-1].offset?a.eq(a.length-1).addClass("is-active"):e.forEach((t,s)=>{window.scrollY>t.offset&&window.scrollY<e[s+1].offset&&a.eq(s).addClass("is-active")})}n(),$(window).on("scroll",n)}(()=>{const e=$(".katakoto-items"),t=e.find(".katakoto-item").length-1;let s=0;setInterval(()=>{s++,s>t&&(s=0),e.css("transform",`translateX(-${270*s}px)`)},4e3)})(),$(".mdc-tooltip").each((e,t)=>{new mdc.tooltip.MDCTooltip(t).foundation.hideDelayMs=0}),$("#articleLink").click(()=>{const e=$("<input>").val($("#articleLink").text());e.css("position","fixed").css("left","-9999px"),$(document.body).append(e),e.focus(),document.execCommand("selectAll"),document.execCommand("copy"),setTimeout(()=>e.remove(),1e3),t("已复制链接")}),(()=>{let e=[];const t=()=>0===e.length&&$.get("/search.json").then(t=>e=t.posts.map(e=>({...e,categories:e.categories.map(e=>e.name),tags:e.tags.map(e=>e.name)})));t(),$("#searchButton").click(()=>{$(".page-search").show(200),t()}),$(".page-search").click((function(e){e.target===this&&($(this).hide(300),setTimeout(()=>{$(".search-result").empty(),$(".search-input").val("")},300))})),$(".search-input").on("input",t=>{$(".search-result").attr("data-dirty","true");const s=t.target.value.trim().toLowerCase(),a=e.filter(e=>""!==s&&(e.title.toLowerCase().indexOf(s)>=0||(!!(e.excerpt&&e.excerpt.toLowerCase().indexOf(s)>=0)||(!!(e.categories&&e.categories.join("|").toLowerCase().indexOf(s)>=0)||!!(e.tags&&e.tags.join("|").toLowerCase().indexOf(s)>=0)))));$(".search-result").attr("data-emptyResult",(0===a.length).toString());const n=a.map(e=>`\n        <a class="search-result--item" href="/${e.path}">\n          <div class="title">${e.title}</div>\n          <div class="excerpt">${e.excerpt}</div>\n          <div class="footer flex-row flex-cross-center">\n            ${e.categories,""}\n            ${e.tags?`\n              <div class="tags">\n                ${e.tags.map(e=>`\n                  <div class="tag flex-row-inline flex-cross-center">\n                    <i class="material-icons">local_offer</i>\n                    <span>${e}</span>\n                  </div>\n                `).join("")}\n              </div>\n            `:""}\n          </div>\n        </a>\n      `);$(".search-result").empty().append(n)})})(),$(".backTopButton").click(()=>window.scrollTo({top:0,behavior:"smooth"})),$(window).on("scroll",()=>{window.scrollY>300?$(".backTopButton").removeClass("is-hide"):$(".backTopButton").addClass("is-hide")})});